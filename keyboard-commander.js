/**
 * Shuffles the order of elements on the page
 * http://james.padolsey.com/javascript/shuffling-the-dom/
 */function shuffle(a){allElems=function(){var b=[],c=a.length;while(c--)b[b.length]=a[c];return b}();var b=function(){var a=allElems.length,b=[];while(a--){var c=Math.floor(Math.random()*allElems.length),d=allElems[c].cloneNode(!0);allElems.splice(c,1),b[b.length]=d}return b}(),c=a.length;while(c--)a[c].parentNode.insertBefore(b[c],a[c].nextSibling),a[c].parentNode.removeChild(a[c])}function toArray(a){var b=[];for(var c=a.length>>>0;c--;)b[c]=a[c];return b}var Gamifier=function(){function l(){var a=document.querySelectorAll(j);for(var b=a.length,d=b-1;d>=0;d--)c[a[d].getAttribute("id")]=a[d].cloneNode(!0),a[d].parentNode.removeChild(a[d])}function m(a){j=a}function n(a){b.appendChild(c[a])}function o(a){var b=document.getElementById(a);b.parentNode.removeChild(b)}function p(){o(a.startScreenId||k),g=new Date,f=0,e=-1,a.start(),t()}function q(){v(a.update())}function r(){clearInterval(h),h=null}function s(){h||(h=setInterval(q,i))}function t(){e++,e-1>=0&&x(e-1);if(e>=d.length){r(),a.success();return}n(d[e].levelId),d[e].startUp&&d[e].startUp(),s()}function u(){l(),n(a.startScreenId||k),a.startScreen()}function v(b){switch(b.status){case"success":a.success(),x(e),r();break;case"failure":a.failure(),x(e),r();break;case"continue":default:w(d[e].update())}}function w(b){var c=!0;switch(b.status){case"success":d[e].success?d[e].success():a.levelSuccess(),r();break;case"failure":d[e].failure?c=d[e].failure():c=a.levelFailure(),c&&r();break;case"continue":default:}}function x(a){o(d[a].levelId),d[a].cleanUp&&d[a].cleanUp()}function y(c){a=c,a.loopInterval&&(i=a.loopInterval),b=document.getElementById(c.activeScreenId||"active-screen"),c.setUp(),u()}function z(a){d.push(a)}var a=null,b=null,c={},d=[],e=-1,f=0,g=0,h=null,i=15,j=".screen",k="start-screen";return{iterationCount:f,startTime:g,setScreenSelector:m,registerGameObject:y,registerLevelObject:z,showScreen:n,hideScreen:o,start:p,pause:r,resume:s,nextLevel:t}}(),KeyboardCommander=function(){function h(){window.addEventListener("blur",q,!1),window.addEventListener("focus",r,!1),window.addEventListener("mousemove",p,!1),shuffle(document.getElementById(a).getElementsByClassName("message")),shuffle(document.getElementById(b).getElementsByClassName("message")),document.getElementById("start-over-link").href=location.href,document.documentElement.className+="os-"+f,toArray(document.getElementsByClassName(g)).forEach(function(a,b,c){a.parentNode.removeChild(a)})}function i(){document.getElementsByClassName("game-start")[0].addEventListener("click",function a(b){this.removeEventListener("click",a,!1),Gamifier.start()},!1)}function j(){}function k(){var a={status:"continue"};return d&&(a.status="failure"),a}function l(){Gamifier.showScreen("success")}function m(){Gamifier.showScreen("failure")}function n(){Gamifier.pause(),Gamifier.showScreen(a);var b=document.getElementById(a).getElementsByClassName("message")[0];b.removeAttribute("hidden"),c=setTimeout(function(){clearTimeout(c),Gamifier.hideScreen(a),b.setAttribute("hidden",!0),b.parentNode.appendChild(b),Gamifier.nextLevel()},700)}function o(){Gamifier.pause(),Gamifier.showScreen(b);var a=document.getElementById(b).getElementsByClassName("message")[0];a.removeAttribute("hidden"),c=setTimeout(function(){clearTimeout(c),Gamifier.hideScreen(b),a.setAttribute("hidden",!0),a.parentNode.appendChild(a),Gamifier.resume()},700)}function p(a){if(e.x===!1||e.y===!1)e.x=a.clientX,e.y=a.clientY;if(e.x!=a.clientX||e.y!=a.clientY)d=!0;e.x=a.clientX,e.y=a.clientY}function q(){e.x=!1,e.y=!1,window.removeEventListener("mousemove",p)}function r(){var a=setTimeout(function(){window.addEventListener("mousemove",p,!1),clearTimeout(a)},100)}var a="level-success",b="level-failure",c=null,d=!1,e={x:!1,y:!1},f=navigator.platform.search(/mac/i)>-1?"mac":"win",g=f=="win"?"mac":"win";return{startScreen:i,setUp:h,start:j,update:k,success:l,failure:m,levelSuccess:n,levelFailure:o}}();Gamifier.registerGameObject(KeyboardCommander);var Level1=function(){function e(){var a={status:"continue"};return c&&d.value.toLowerCase()=="s"?(a.status="success",a):c&&d.value.toLowerCase()!="s"?(c=!1,a.status="failure",a):a}function f(){c=!1,b=document.getElementById(a+"-form"),b.addEventListener("submit",h,!1),b.reset(),d=document.getElementById("shortcut-save")}function g(){b.removeEventListener("submit",h),b=null,d=null}function h(a){a.preventDefault(),c=!0}var a="level-1",b=null,c=!1,d=null;return{levelId:a,update:e,startUp:f}}();Gamifier.registerLevelObject(Level1);var Level2=function(){function f(){var a={status:"continue"};return c&&d.value.toLowerCase()=="n"&&e.value.toLowerCase()=="o"?(a.status="success",a):!c||d.value.toLowerCase()=="n"&&e.value.toLowerCase()=="o"?a:(c=!1,a.status="failure",a)}function g(){c=!1,b=document.getElementById(a+"-form"),b.addEventListener("submit",i,!1),b.reset(),d=document.getElementById("shortcut-new"),e=document.getElementById("shortcut-open")}function h(){b.removeEventListener("submit",i),b=null,d=null,e=null}function i(a){a.preventDefault(),c=!0}var a="level-2",b=null,c=!1,d=null,e=null;return{levelId:a,update:f,startUp:g}}();Gamifier.registerLevelObject(Level2);var Level3=function(){function j(){var a={status:"continue"};return f.value.toLowerCase()=="v"&&h.removeAttribute("hidden"),e.value.toLowerCase()=="x"&&i.removeAttribute("hidden"),c&&d.value.toLowerCase()=="c"&&e.value.toLowerCase()=="x"&&f.value.toLowerCase()=="v"&&g.value.toLowerCase()=="z"?(a.status="success",a):!c||d.value.toLowerCase()=="c"&&e.value.toLowerCase()=="x"&&f.value.toLowerCase()=="v"&&g.value.toLowerCase()=="z"?a:(c=!1,a.status="failure",a)}function k(){c=!1,b=document.getElementById(a+"-form"),b.addEventListener("submit",m,!1),b.reset(),d=document.getElementById("shortcut-copy"),e=document.getElementById("shortcut-cut"),f=document.getElementById("shortcut-paste"),g=document.getElementById("shortcut-undo"),h=document.getElementById("shortcut-cut-box"),i=document.getElementById("shortcut-undo-box")}function l(){b.removeEventListener("submit",m),b=null,d=null,e=null,f=null,g=null,h=null,i=null}function m(a){a.preventDefault(),c=!0}var a="level-3",b=null,c=!1,d=null,e=null,f=null,g=null,h=null,i=null;return{levelId:a,update:j,startUp:k}}();Gamifier.registerLevelObject(Level3);var Level4=function(){function g(){var a={status:"continue"};return c&&d.value.toLowerCase()=="w"&&e.value.toLowerCase()=="t"&&f.value.toLowerCase()=="f"?(a.status="success",a):!c||d.value.toLowerCase()=="w"&&e.value.toLowerCase()=="t"&&f.value.toLowerCase()=="f"?a:(c=!1,a.status="failure",a)}function h(){c=!1,b=document.getElementById(a+"-form"),b.addEventListener("submit",j,!1),b.reset(),d=document.getElementById("shortcut-win"),e=document.getElementById("shortcut-tab"),f=document.getElementById("shortcut-find")}function i(){b.removeEventListener("submit",j),b=null,d=null,e=null,f=null}function j(a){a.preventDefault(),c=!0}var a="level-4",b=null,c=!1,d=null,e=null,f=null;return{levelId:a,update:g,startUp:h}}();Gamifier.registerLevelObject(Level4);var Level5=function(){function f(){var a={status:"continue"};return c&&e.checked?(a.status="success",a):c&&(!e.checked||!d.checked||d.checked)?(c=!1,a.status="failure",a):a}function g(){c=!1,b=document.getElementById(a+"-form"),b.addEventListener("submit",i,!1),b.reset(),d=document.getElementById("shortcut-refresh-t"),e=document.getElementById("shortcut-refresh-f")}function h(){b.removeEventListener("submit",i),b=null,d=null,e=null}function i(a){a.preventDefault(),c=!0}var a="level-5",b=null,c=!1,d=null,e=null;return{levelId:a,update:f,startUp:g}}();Gamifier.registerLevelObject(Level5);var Level6=function(){function e(){var a={status:"continue"};return c&&d.value.toLowerCase()=="shift"?(a.status="success",a):c&&d.value.toLowerCase()!="shift"?(c=!1,a.status="failure",a):a}function f(){c=!1,b=document.getElementById(a+"-form"),b.addEventListener("submit",h,!1),b.reset(),d=document.getElementById("shortcut-highlight")}function g(){b.removeEventListener("submit",h),b=null,d=null}function h(a){a.preventDefault(),c=!0}var a="level-6",b=null,c=!1,d=null;return{levelId:a,update:e,startUp:f}}();Gamifier.registerLevelObject(Level6);var Level7=function(){function l(){var a={status:"continue"};return c&&d.value.toLowerCase()=="ctrl"&&e.value.toLowerCase()=="a"&&f.value.toLowerCase()=="home"&&g.value.toLowerCase()=="end"&&h.value.toLowerCase()=="ctrl"&&i.value.toLowerCase()=="right"&&j.value.toLowerCase()=="ctrl"&&k.value.toLowerCase()=="left"?(a.status="success",a):!c||d.value.toLowerCase()=="ctrl"&&e.value.toLowerCase()=="a"&&f.value.toLowerCase()=="home"&&g.value.toLowerCase()=="end"&&h.value.toLowerCase()=="ctrl"&&i.value.toLowerCase()=="right"&&j.value.toLowerCase()=="ctrl"&&k.value.toLowerCase()=="left"?a:(c=!1,a.status="failure",a)}function m(){c=!1,b=document.getElementById(a+"-form"),b.addEventListener("submit",o,!1),b.reset(),d=document.getElementById("shortcut-select-meta"),e=document.getElementById("shortcut-select-letter"),f=document.getElementById("shortcut-start-meta"),g=document.getElementById("shortcut-end-meta"),h=document.getElementById("shortcut-next-meta"),i=document.getElementById("shortcut-next-letter"),j=document.getElementById("shortcut-prev-meta"),k=document.getElementById("shortcut-prev-letter")}function n(){b.removeEventListener("submit",o),b=null,d=null,e=null,f=null,g=null,h=null,i=null,j=null,k=null}function o(a){a.preventDefault(),c=!0}var a="level-7",b=null,c=!1,d=null,e=null,f=null,g=null,h=null,i=null,j=null,k=null;return{levelId:a,update:l,startUp:m}}();Gamifier.registerLevelObject(Level7);var Level8=function(){function d(){var a={status:"continue"};return b&&c&&(a.status="success"),a}function e(){b=!1,c=!1,window.addEventListener("blur",g,!1),window.addEventListener("focus",h,!1)}function f(){window.removeEventListener("blur",g),window.removeEventListener("focus",h)}function g(a){a.preventDefault(),b=!0}function h(a){a.preventDefault(),c=!0}var a="level-8",b=!1,c=!1;return{levelId:a,update:d,startUp:e}}();Gamifier.registerLevelObject(Level8);var Level9=function(){function f(){var a={status:"continue"};return b&&c&&(a.status="success"),a}function g(){b=!1,c=!1,window.addEventListener("hashchange",i,!1),d=document.getElementById("level-9-1"),e=document.getElementById("level-9-2"),document.getElementById("hash-example-domain").innerHTML=location.href}function h(){window.removeEventListener("hashchange",i),d=null,e=null}function i(a){location.hash=="#keyboard"&&(b=!0,d.setAttribute("hidden",!0),e.removeAttribute("hidden")),b&&location.hash==""&&(c=!0)}var a="level-9",b=!1,c=!1,d=null,e=null;return{levelId:a,update:f,startUp:g}}();Gamifier.registerLevelObject(Level9);var Level10=function(){function e(){var a={status:"continue"};return c&&d.checked?(a.status="success",a):c&&!d.checked?(c=!1,a.status="failure",a):a}function f(){c=!1,b=document.getElementById("finish"),b.addEventListener("click",h,!1),d=document.getElementById("rule")}function g(){b=null,d=null}function h(a){a.preventDefault(),c=!0}var a="level-10",b=null,c=!1,d=null;return{levelId:a,update:e,startUp:f}}();Gamifier.registerLevelObject(Level10);